<!DOCTYPE html>
<html lang="pl">

<head>
  <meta charset="UTF-8">
  <title>Pierwszy komponent w React.js</title>
  <script src="https://unpkg.com/react/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone/babel.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css">

  <style>





  </style>

</head>



<body>

<div id="app"></div>


<script type="text/babel">

  const allUsers = ["Aneta", "Daniel", "Maciej", "Kamil"]

  class App extends React.Component {
    constructor() {
      super();

      this.state = {
        filteredUsers: allUsers
      };
    }


    filterList(e){
      const text = e.currentTarget.value;
      const filteredUsers = this.getFilteredUsersForText(text)
      this.setState({
        filteredUsers
      })

    }

    getFilteredUsersForText(text) {
      return new Promise(resolve => {
        const time = (Math.random() + 1) * 250;
        setTimeout(() => {
          const filteredUsers = allUsers.filter(user => user.toLowerCase().includes(text.toLowerCase()));
          resolve(filteredUsers);
        }, time) ;
      });
    }

    render() {
      return (
              <div>
                <input onInput={this.filterList.bind(this)}/>
                <UserList users= {this.state.filteredUsers} />              </div>
      );
    }
  }

  const UserList = ({users}) => {
    if (users.length > 0) {

    return(
            <ul>
              {users.map(user => <li key={user}>{user}</li> )}
            </ul>
    )
    }

    return (
            <p>No results</p>
    )
  }


  ReactDOM.render(<App />, document.getElementById("app"));


</script>
</body>

</html>